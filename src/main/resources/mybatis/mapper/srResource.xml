<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oti.team2.srresource.dao.ISrResourceDao">
	<!-- 자원정보 리스트 가져오기 -->
	<select id="selectBySrNo" parameterType="String" resultType="srResource">
		SELECT 
			SR_SRC as "srSrc",
			EMP_ID as "empId",
			PTCPTN_ROLE_CD as "ptcptnRoleCd",
			SCHDL_BGNG_YMD as "schdlBgngYmd",
			SCHDL_END_YMD as "schdlEndYmd"
		FROM
			SR_RESOURCES
		WHERE
			SR_NO=#{srNo}
	</select>
	<!-- 자원정보 리스트 가져오기 -->
	<select id="selectByEmpId" parameterType="String" resultType="srResourceOfDeveloper">
		SELECT 
			SR_SRC as "srSrc",
			TTL as "title",
			SCHDL_BGNG_YMD as "start",
			SCHDL_END_YMD as "end"
		FROM
			SR_RESOURCES r, SR_INFORMATION i, SR_DEMAND d
		WHERE
			r.SR_NO=i.SR_NO AND
			i.DMND_NO = d.DMND_NO AND
			r.EMP_ID=#{empId}
	</select>
	
	<!-- 자원정보 추가 -->
	<insert id="insertSrResource" parameterType="srResource" >
		INSERT INTO SR_RESOURCES (SR_SRC, SR_NO, EMP_ID, PTCPTN_ROLE_CD, SCHDL_BGNG_YMD, SCHDL_END_YMD)
		VALUES (sr_src_seq.nextval,#{srNo}, #{empId}, #{ptcptnRoleCd}, #{schdlBgngYmd}, #{schdlEndYmd})  
		
	</insert>
	
	<!-- 자원정보 삭제 -->
	<delete id="deleteBySrSrc" parameterType="map">
		DELETE FROM SR_RESOURCES
		<where>
			<foreach item="src" collection="srSrc" separator="OR">
				(SR_SRC = #{item})
			</foreach>
		</where>
	</delete>
</mapper>